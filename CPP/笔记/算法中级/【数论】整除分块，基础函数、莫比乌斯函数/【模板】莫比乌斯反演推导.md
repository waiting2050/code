### 莫比乌斯反演推导 \( \sum_{i=1}^x \sum_{j=1}^y [\gcd(i,j)=d] \)

1. 从 \( \sum_{i=1}^x \sum_{j=1}^y [\gcd(i,j)=d] \) 出发，因 \( d \mid i \) 且 \( d \mid j \)，进行变量代换 \( i = d \cdot i' \)，\( j = d \cdot j' \)，转化为：
   \[
   \sum_{i'=1}^{\lfloor \frac{x}{d} \rfloor} \sum_{j'=1}^{\lfloor \frac{y}{d} \rfloor} [\gcd(i',j')=1]
   \]

2. 利用莫比乌斯函数性质 \( [n=1] = \sum_{d \mid n} \mu(d) \)，将 \( [\gcd(i',j')=1] \) 替换为莫比乌斯函数的求和：
   \[
   \sum_{i'=1}^{\lfloor \frac{x}{d} \rfloor} \sum_{j'=1}^{\lfloor \frac{y}{d} \rfloor} \sum_{k \mid \gcd(i',j')} \mu(k)
   \]

3. 交换求和顺序，先枚举 \( k \)，再统计能被 \( k \) 同时整除的 \( i', j' \) 数量。此时 \( i' = k \cdot i'' \)，\( j' = k \cdot j'' \)，且 \( i'' \leq \lfloor \frac{\lfloor \frac{x}{d} \rfloor}{k} \rfloor \)，\( j'' \leq \lfloor \frac{\lfloor \frac{y}{d} \rfloor}{k} \rfloor \)，求和式变为：
   \[
   \sum_{k=1}^{\min(\lfloor \frac{x}{d} \rfloor, \lfloor \frac{y}{d} \rfloor)} \mu(k) \sum_{i'=1}^{\lfloor \frac{x}{d} \rfloor} [k \mid i'] \sum_{j'=1}^{\lfloor \frac{y}{d} \rfloor} [k \mid j']
   \]

4. 令 \( n = \lfloor \frac{x}{d} \rfloor \)，\( m = \lfloor \frac{y}{d} \rfloor \)，则能被 \( k \) 整除的 \( i' \) 数量为 \( \lfloor \frac{n}{k} \rfloor \)，能被 \( k \) 整除的 \( j' \) 数量为 \( \lfloor \frac{m}{k} \rfloor \)，最终推导得到：
   \[
   \sum_{k=1}^{\min(n,m)} \mu(k) \lfloor \frac{n}{k} \rfloor \lfloor \frac{m}{k} \rfloor
   \]
   其中可通过预处理莫比乌斯函数前缀和与数论分块技术，将时间复杂度优化。