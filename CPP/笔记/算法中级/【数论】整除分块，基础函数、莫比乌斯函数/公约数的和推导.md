### 推导过程
1. 首先，将原式转化为对最大公约数 \( d \) 的枚举求和：
   \[
   \sum_{d=1}^n d \sum_{i=1}^n \sum_{j=1}^n [\gcd(i,j)=d]
   \]
2. 进行变量代换，令 \( i = d \cdot i' \)，\( j = d \cdot j' \)，则条件 \( \gcd(i,j)=d \) 转化为 \( \gcd(i',j')=1 \)，求和式变为：
   \[
   \sum_{d=1}^n d \sum_{i'=1}^{\lfloor \frac{n}{d} \rfloor} \sum_{j'=1}^{\lfloor \frac{n}{d} \rfloor} [\gcd(i',j')=1]
   \]
3. 利用莫比乌斯函数的性质 \( [n=1] = \sum_{k \mid n} \mu(k) \)，将 \( [\gcd(i',j')=1] \) 替换为莫比乌斯函数的求和：
   \[
   \sum_{d=1}^n d \sum_{k=1}^{\lfloor \frac{n}{d} \rfloor} \mu(k) \left\lfloor \frac{n}{k d} \right\rfloor^2
   \]
4. 令 \( t = kd \)，交换求和顺序，将对 \( d \) 和 \( k \) 的双重求和转化为对 \( t \) 和 \( k \)（\( k \mid t \)）的求和，同时 \( d = \frac{t}{k} \)，代入后得到：
   \[
   \sum_{t=1}^n \sum_{k \mid t} \mu(k) \frac{t}{k} \left\lfloor \frac{n}{t} \right\rfloor^2
   \]
5. 由于 \( \phi(t) = \sum_{k \mid t} \mu(k) \frac{t}{k} \)（欧拉函数的莫比乌斯反演形式），所以上式可化简为：
   \[
   \sum_{t=1}^n \phi(t) \left\lfloor \frac{n}{t} \right\rfloor^2
   \]

   ### 推导中涉及的核心操作：反演与卷积的结合

1. **莫比乌斯反演的应用**  
   步骤3中，利用性质 \([n=1] = \sum_{k \mid n} \mu(k)\) 将互质条件 \([\gcd(i',j')=1]\) 转化为莫比乌斯函数的求和，这是**莫比乌斯反演的直接应用**（通过因子求和表示真值函数）。

2. **狄利克雷卷积的体现**  
   步骤5中，内层求和 \(\sum_{k \mid t} \mu(k) \cdot \frac{t}{k}\) 是**狄利克雷卷积**的典型形式：  
   - 这里是莫比乌斯函数 \(\mu(k)\) 与恒等函数 \(\text{Id}(k) = k\) 的卷积，即 \((\mu * \text{Id})(t) = \sum_{k \mid t} \mu(k) \cdot \text{Id}\left(\frac{t}{k}\right)\)。  
   - 而该卷积的结果恰好是欧拉函数 \(\phi(t)\)，即 \(\phi = \mu * \text{Id}\)。